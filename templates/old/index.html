<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cricket Team Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

<h1 class="text-center">Cricket Team Management</h1>

<div class="container">

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <!-- Players List Table -->
  <h2>Players List</h2>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Player ID</th>
        <th>Cap Number</th>
        <th>First Name</th>
        <th>Middle Name</th>
        <th>Last Name</th>
        <th>Batting Style</th>
        <th>Bowling Style</th>
        <th>Date of Birth</th>
        <th>Team (ID - Name)</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>
    {% for p in players %}
      <tr>
        <td>{{ p.player_id }}</td>
        <td>{{ p.cap_number }}</td>
        <td>{{ p.first_name }}</td>
        <td>{{ p.middle_name or '' }}</td>
        <td>{{ p.last_name }}</td>
        <td>{{ p.batting_style }}</td>
        <td>{{ p.bowling_style or '-' }}</td>
        <td>{{ p.dob }}</td>
        <td>{{ p.team_id }} - {{ p.team_name }}</td>
        <td>
          <form action="{{ url_for('delete_player', player_id=p.player_id) }}" method="POST" onsubmit="return confirm('Delete?');">
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>

  <!-- Add Player Form -->
  <h2>Add Player</h2>
  <form action="/add_player" method="POST" class="mb-5">
    <label>Cap Number:</label>
    <input type="number" name="cap_number" class="form-control" required>

    <label>First Name:</label>
    <input type="text" name="first_name" class="form-control" required>

    <label>Middle Name:</label>
    <input type="text" name="middle_name" class="form-control">

    <label>Last Name:</label>
    <input type="text" name="last_name" class="form-control" required>

    <label>Batting Style:</label>
    <input type="text" name="batting_style" class="form-control" required>

    <label>Bowling Style:</label>
    <input type="text" name="bowling_style" class="form-control">

    <label>Date of Birth:</label>
    <input type="date" name="dob" class="form-control" required>

    <label>Team ID:</label>
    <select name="team_id" class="form-control" required>
      {% for t in teams %}
        <option value="{{ t.team_id }}">{{ t.team_id }} - {{ t.name }}</option>
      {% endfor %}
    </select>

    <button type="submit" class="btn btn-primary mt-3">Add Player</button>
  </form>

  <!-- Add Team Form -->
  <h2>Add Team</h2>
  <form action="/add_team" method="POST" class="mb-5">
    <label>Team ID:</label>
    <input type="number" name="team_id" class="form-control" required>

    <label>Team Name:</label>
    <input type="text" name="name" class="form-control" required>

    <label>Team Sponsor:</label>
    <input type="text" name="sponsor" class="form-control">

    <label>Team Captain:</label>
    <input type="text" name="captain" class="form-control">

    <label>Team Coach:</label>
    <input type="text" name="coach" class="form-control">

    <label>ODI Ranking:</label>
    <input type="number" name="odi_ranking" class="form-control" min="1">

    <label>T20I Ranking:</label>
    <input type="number" name="t20i_ranking" class="form-control" min="1">

    <label>Test Ranking:</label>
    <input type="number" name="test_ranking" class="form-control" min="1">

    <button type="submit" class="btn btn-primary mt-3">Add Team</button>
  </form>

  <!-- Update Player Record Form -->
  <h2>Update Player Record</h2>
  <form action="/update_record" method="POST" class="mb-5">
    <label>Player ID:</label>
    <input type="number" name="player_id" class="form-control" required>

    <label>Match ID:</label>
    <input type="number" name="matchid" class="form-control" required>

    <label>Team ID:</label>
    <input type="number" name="team_id" class="form-control" required>

    <label>Runs:</label>
    <input type="number" name="runs" class="form-control">

    <label>Average:</label>
    <input type="number" step="0.01" name="avg" class="form-control">

    <label>Strike Rate:</label>
    <input type="number" step="0.01" name="strike_rate" class="form-control">

    <label>Wickets:</label>
    <input type="number" name="wickets" class="form-control">

    <button type="submit" class="btn btn-primary mt-3">Update Record</button>
  </form>

  <!-- Update Player Awards Form -->
  <h2>Update Player Awards</h2>
  <form action="/update_award" method="POST" class="mb-5">
    <label>Player ID:</label>
    <input type="number" name="player_id" class="form-control" required>

    <label>Number of MOM Awards:</label>
    <input type="number" name="no_of_mom" class="form-control">

    <label>Number of POS Awards:</label>
    <input type="number" name="no_of_pos" class="form-control">

    <label>World Cups Won:</label>
    <input type="number" name="worldcupswon" class="form-control">

    <button type="submit" class="btn btn-primary mt-3">Update Awards</button>
  </form>

  <!-- Update Player Injury Record Form -->
  <h2>Update Player Injury Record</h2>
  <form action="/update_injury" method="POST" class="mb-5">
    <label>Player ID:</label>
    <input type="number" name="player_id" class="form-control" required>

    <label>Injury Date:</label>
    <input type="date" name="injurydate" class="form-control" required>

    <label>Injury Match:</label>
    <input type="text" name="injurymatch" class="form-control">

    <label>Injury Type:</label>
    <input type="text" name="injurytype" class="form-control">

    <label>Recovery Time:</label>
    <input type="text" name="recovery_time" class="form-control">

    <button type="submit" class="btn btn-primary mt-3">Update Injury</button>
  </form>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
